:root {
  --voting-cards-weight-0: #8b898b;
  --voting-cards-weight-1: #f44336;
  --voting-cards-weight-2: #ffc107;
  --voting-cards-weight-3: #4caf50;
}

.voting {
  &-voting_cards {
    $rectangle-width: 3rem;
    $rectangle-width-compact: 1.5rem;

    @apply mb-6 border-b-2;

    border-color: #d9d9d9;

    &.current-choice {
      @apply text-center mb-0 border-b-0;

      .vote-card {
        @apply mt-2;

        .vote-label {
          @apply mb-4 text-black;
        }
      }

      .change-vote-button:hover {
        @apply mt-0;

        font-size: 1rem;
      }
    }

    &.loading {
      @apply opacity-30 pointer-events-none relative cursor-wait;

      &::before {
        @apply content-[""] block w-6 h-6 rounded-full animate-spin absolute border-4 border-l-background border-y-background border-r-secondary;

        z-index: 1000;
        top: calc(50% - 12.5px);
        left: calc(50% - 12.5px);
      }
    }

    .vote {
      &-title {
        @apply text-center;

        font-size: 1.5rem;
      }

      &-card {
        @apply inline-block;

        .vote-label {
          @apply mb-0;

          font-size: 1rem;
        }

        > svg {
          @apply inline-block align-middle max-w-full;

          width: $rectangle-width;
          height: calc($rectangle-width * 2);
          margin: -0.5rem 0 0 0.5rem;
          transition: transform 150ms ease-in-out;

          &:hover {
            transform: scale(1.15) rotate(-5deg);
          }
        }
      }

      &-block {
        @apply flex items-center justify-center relative text-center;

        .vote-count {
          @apply mb-2;

          font-size: 2rem;
          font-weight: bolder;
        }
      }
    }

    .votes_counter {
      letter-spacing: 0.2rem;
      font-size: 1rem;
    }

    .voting-button {
      @apply bg-transparent border-0 text-white font-bold;
    }

    .change-vote-button {
      transition: all 150ms ease-in-out;

      &:hover {
        @apply mt-0 no-underline;

        font-size: 0.9rem;
      }
    }

    .button.abstain-button {
      @apply uppercase bg-transparent;

      color: var(--voting-cards-weight-0);
      border-color: var(--voting-cards-weight-0);

      .abstain-count {
        @apply inline-flex items-center justify-center rounded-full ml-2 font-bold leading-none;

        min-width: 1.5rem;
        height: 1.5rem;
        padding: 0 0.375rem;
        background-color: var(--voting-cards-weight-0);
        color: white;
        font-size: 0.75rem;
      }

      &.voted {
        @apply text-white border-transparent;

        background-color: var(--voting-cards-weight-0);

        .abstain-count {
          background-color: white;
          color: var(--voting-cards-weight-0);
        }

        &.disabled {
          @apply opacity-100;
        }
      }
    }
  }
}

.vote_proposal_modal {
  div.button__sm {
    @apply inline-block;
  }

  .vote-label {
    @apply ml-2;
  }
}

.proposal {
  &__aside-vote.layout-aside__ctas-buttons:has(.voting-voting_cards) {
    @apply max-md:h-auto;
  }
}

.card {
  &__proposals-votes {
    .card__proposals-votes-container {
      .voting-voting_cards {
        @apply mb-0 border-b-0;
      }

      .awesome-voting-card.from-list {
        $rectangle-width-compact: 1.25rem;

        @apply flex items-center justify-center m-0 p-0 gap-12 md:gap-2 lg:gap-12;

        .vote {
          &-cards-container {
            @apply flex items-center gap-2;
          }

          &-block {
            @apply flex flex-col items-center gap-0.5;

            .vote-count {
              @apply m-0 font-bold leading-none;

              font-size: 0.75rem;
              order: 1;
            }

            .vote-action {
              @apply flex flex-col items-center gap-0.5 no-underline;

              order: 2;

              .vote-label {
                @apply m-0 leading-none;

                font-size: 0.625rem;
                order: 1;
              }

              > svg {
                @apply m-0;

                width: $rectangle-width-compact;
                height: calc($rectangle-width-compact * 2);
                order: 2;
                transition: transform 150ms ease-in-out;
              }

              &:hover > svg {
                transform: scale(1.15) rotate(-5deg);
              }
            }
          }

          &-actions-container {
            @apply flex flex-col items-center;

            .abstain-button {
              @apply m-0 flex items-center gap-2 whitespace-nowrap;

              font-size: 10px;
              padding: 0.125rem 0.375rem;

              .abstain-count {
                @apply inline-flex items-center justify-center rounded-full font-bold leading-none;

                min-width: 1.25rem;
                height: 1.25rem;
                padding: 0 0.25rem;
                background-color: var(--voting-cards-weight-0);
                color: white;
                font-size: 0.625rem;
              }
            }

            .change-vote-button {
              @apply m-0 whitespace-nowrap no-underline;

              font-size: 0.625rem;
              padding: 0.125rem 0.375rem;

              &:hover {
                @apply underline;
              }
            }

            .vote-message {
              @apply text-center m-0 whitespace-nowrap;

              font-size: 0.625rem;
            }
          }
        }
      }
    }
  }
}

.voting-voting_cards .vote-card,
.awesome-voting-card.from-list .vote-block .vote-action,
.awesome-voting-card.from-list .vote-actions-container .vote-action {
  &.weight_3 {
    color: var(--voting-cards-weight-3);

    & > svg {
      fill: var(--voting-cards-weight-3);
    }

    .vote-label {
      color: var(--voting-cards-weight-3);
    }
  }

  &.weight_2 {
    color: var(--voting-cards-weight-2);

    & > svg {
      fill: var(--voting-cards-weight-2);
    }

    .vote-label {
      color: var(--voting-cards-weight-2);
    }
  }

  &.weight_1 {
    color: var(--voting-cards-weight-1);

    & > svg {
      fill: var(--voting-cards-weight-1);
    }

    .vote-label {
      color: var(--voting-cards-weight-1);
    }
  }

  &.voted > svg {
    transform: scale(1.15) rotate(-5deg);
  }

  &.dim {
    @apply opacity-30 pointer-events-none;
  }
}

.voting-voting_cards .disabled,
.awesome-voting-card .disabled {
  @apply pointer-events-none cursor-not-allowed;
}
